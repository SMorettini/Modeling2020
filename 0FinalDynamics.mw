<?xml version="1.0" encoding="UTF-8"?>
<Worksheet>
<Version major="2019" minor="2"/>
<Label-Scheme value="2" prefix=""/>
<View-Properties presentation="true" autoexpanding_sections="true" UserProfileName="Maple Default Profile" NumericFormat-ApplyInteger="true" NumericFormat-ApplyRational="true" NumericFormat-ApplyExponent="false" editable="true">
</View-Properties>
<MapleNet-Properties prettyprint="3" warnlevel="3" compactdisplay="false" preplot="" helpbrowser="standard" displayprecision="-1" echo="1" unitattributes="&quot;fontweight&quot; = &quot;bold&quot;" imaginaryunit="I" longdelim="true" elisiontermsthreshold="10000" elisiondigitsafter="100" elisiondigitsbefore="100" plotdevice="inline" errorbreak="1" plotoptions="" plotdriver="opengl" quiet="false" elisiontermsbefore="100" elisiontermsafter="100" historytimestamp="false" screenwidth="79" indentamount="4" plotoutput="terminal" screenpixelheight="1080" rtablesize="[10, 10]" useclientjvm="true" labelwidth="20" postplot="" typesetting="extended" ansi="false" ansicolor="[]" elisiondigitsthreshold="10000" showassumed="1" ansilprint="false" trailingsemicolon="true" errorcursor="false" labelling="true" screenheight="25" prompt="&gt; " verboseproc="1" latexwidth="8.0" ShowLabels="true"/>
<Styles>
<Font name="Heading 1" background="[255,255,255]" bold="true" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="18" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Warning" background="[255,255,255]" bold="false" executable="false" family="Courier New" foreground="[0,0,255]" italic="false" opaque="false" readonly="true" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="2D Output" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,255]" italic="false" opaque="false" readonly="true" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Heading 4" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="true" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Line Printed Output" background="[255,255,255]" bold="false" executable="false" family="Courier New" foreground="[0,0,255]" italic="false" opaque="false" readonly="true" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Heading 2" background="[255,255,255]" bold="true" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="16" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Maple Output" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="2D Inert Output" background="[255,255,255]" bold="false" executable="true" family="Times New Roman" foreground="[144,144,144]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Heading 3" background="[255,255,255]" bold="true" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="true" opaque="false" readonly="false" size="14" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Diagnostic" background="[255,255,255]" bold="false" executable="false" family="Courier New" foreground="[40,120,40]" italic="false" opaque="false" readonly="true" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Ordered List 1" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Maple Input" background="[255,255,255]" bold="true" executable="true" family="Courier New" foreground="[120,0,14]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Text Output" background="[255,255,255]" bold="false" executable="false" family="Courier New" foreground="[0,0,255]" italic="false" opaque="false" readonly="true" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Ordered List 2" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Ordered List 3" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Ordered List 4" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Ordered List 5" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Annotation Title" background="[255,255,255]" bold="true" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="18" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Header and Footer" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="10" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="HyperlinkError" background="[255,255,255]" bold="false" executable="false" family="Courier New" foreground="[255,0,255]" italic="false" opaque="false" readonly="true" size="12" subscript="false" superscript="false" underline="true" placeholder="false"/>
<Font name="Atomic Variable" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[175,0,175]" italic="true" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="HyperlinkWarning" background="[255,255,255]" bold="false" executable="false" family="Courier New" foreground="[0,0,255]" italic="false" opaque="false" readonly="true" size="12" subscript="false" superscript="false" underline="true" placeholder="false"/>
<Font name="Dictionary Hyperlink" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[147,0,15]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="true" placeholder="false"/>
<Font name="2D Math" background="[255,255,255]" bold="false" executable="true" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Bullet Item" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Maple Plot" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Annotation Text" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="List Item" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Dash Item" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="2D Input" background="[255,255,255]" bold="false" executable="true" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Error" background="[255,255,255]" bold="false" executable="false" family="Courier New" foreground="[255,0,255]" italic="false" opaque="false" readonly="true" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Title" background="[255,255,255]" bold="true" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="18" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Text" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Normal" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Caption Reference" background="[255,255,255]" bold="true" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Code" background="[255,255,255]" bold="false" executable="false" family="Courier New" foreground="[255,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Maple Input Placeholder" background="[255,255,255]" bold="true" executable="true" family="Courier New" foreground="[200,0,200]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="true"/>
<Font name="Equation Label" background="[255,255,255]" bold="true" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Author" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Font name="Hyperlink" background="[255,255,255]" bold="false" executable="false" family="Times New Roman" foreground="[0,128,128]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="true" placeholder="false"/>
<Font name="Caption Text" background="[255,255,255]" bold="true" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" opaque="false" readonly="false" size="12" subscript="false" superscript="false" underline="false" placeholder="false"/>
<Layout name="Heading 1" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="8" spacebelow="4" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Warning" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Heading 4" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Line Printed Output" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="any" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Heading 2" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="8" spacebelow="2" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Maple Output" alignment="centred" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.3" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Heading 3" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Diagnostic" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="any" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Ordered List 1" alignment="left" bullet="numeric" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="3" spacebelow="3" linebreak="space" pagebreak-before="false" initial="-1" bulletsuffix="."/>
<Layout name="Text Output" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="newline" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Ordered List 2" alignment="left" bullet="alphabetic" firstindent="0" leftmargin="36" rightmargin="0" linespacing="0.0" spaceabove="3" spacebelow="3" linebreak="space" pagebreak-before="false" initial="-1" bulletsuffix="."/>
<Layout name="Ordered List 3" alignment="left" bullet="roman" firstindent="0" leftmargin="72" rightmargin="0" linespacing="0.0" spaceabove="3" spacebelow="3" linebreak="space" pagebreak-before="false" initial="-1" bulletsuffix="."/>
<Layout name="Ordered List 4" alignment="left" bullet="ALPHABETIC" firstindent="0" leftmargin="108" rightmargin="0" linespacing="0.0" spaceabove="3" spacebelow="3" linebreak="space" pagebreak-before="false" initial="-1" bulletsuffix="."/>
<Layout name="Ordered List 5" alignment="left" bullet="ROMAN" firstindent="0" leftmargin="144" rightmargin="0" linespacing="0.0" spaceabove="3" spacebelow="3" linebreak="space" pagebreak-before="false" initial="-1" bulletsuffix="."/>
<Layout name="Annotation Title" alignment="centred" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="12" spacebelow="12" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="HyperlinkError" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="HyperlinkWarning" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Bullet Item" alignment="left" bullet="dot" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="3" spacebelow="3" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Maple Plot" alignment="centred" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="List Item" alignment="left" bullet="indent" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="3" spacebelow="3" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Dash Item" alignment="left" bullet="dash" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="3" spacebelow="3" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Error" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Title" alignment="centred" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="12" spacebelow="12" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Normal" alignment="left" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="0" spacebelow="0" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Layout name="Author" alignment="centred" bullet="none" firstindent="0" leftmargin="0" rightmargin="0" linespacing="0.0" spaceabove="8" spacebelow="8" linebreak="space" pagebreak-before="false" initial="0" bulletsuffix=""/>
<Pencil-style name="Pencil 1" pen-color="[0,0,0]" pen-height="1.0" pen-width="1.0" pen-opacity="1.0"/>
<Pencil-style name="Pencil 2" pen-color="[0,0,255]" pen-height="1.0" pen-width="1.0" pen-opacity="1.0"/>
<Pencil-style name="Pencil 3" pen-color="[0,0,0]" pen-height="3.0" pen-width="3.0" pen-opacity="1.0"/>
<Pencil-style name="Pencil 4" pen-color="[0,0,255]" pen-height="3.0" pen-width="3.0" pen-opacity="1.0"/>
<Pencil-style name="Pencil 5" pen-color="[255,0,0]" pen-height="5.0" pen-width="5.0" pen-opacity="1.0"/>
<Highlighter-style name="Highlighter 5" pen-color="[255,255,0]" pen-height="48.0" pen-width="48.0" pen-opacity="0.8"/>
<Highlighter-style name="Highlighter 3" pen-color="[51,255,0]" pen-height="24.0" pen-width="24.0" pen-opacity="0.8"/>
<Highlighter-style name="Highlighter 4" pen-color="[0,255,255]" pen-height="32.0" pen-width="32.0" pen-opacity="0.8"/>
<Highlighter-style name="Highlighter 1" pen-color="[255,153,255]" pen-height="12.0" pen-width="8.0" pen-opacity="0.8"/>
<Highlighter-style name="Highlighter 2" pen-color="[255,204,0]" pen-height="14.0" pen-width="14.0" pen-opacity="0.8"/>
</Styles>
<Startup-Code startupcode=""/>
<Task-table>
    <Task-category name="&lt;default&gt;"/>
</Task-table>
<Task>
<TaskVariable name="dot" description=""/>
</Task><Table visible="true" editable="true" exterior="bottom" pagebreak="cell" showlabel="false" title="" plotalignlists="" hiddenborderdisplay="worksheet" interior="none" postexecute="advance" drawcaption="false" drawtitle="false" width="100.0%" captionalignment="0" showinput="false" captionposition="1" id="Table0" alignment="left" randomized="false" labelreference="L63792" showgroup="false" order="row"><Table-Column weight="4" separator="true"></Table-Column><Table-Column weight="196" separator="true"></Table-Column><Table-Row align="top" separator="true"><Table-Cell padding="5" visible="true" fillcolor="[255,255,255]" rowspan="1" backgroundstyle="0" columnspan="1">
<Group labelreference="L63780" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">JSFH</Equation></Text-field>
</Input>
</Group><Text-field style="Text" layout="Normal"></Text-field>
<Group labelreference="L63782" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">JSFH</Equation></Text-field>
</Input>
</Group></Table-Cell><Table-Cell padding="5" visible="true" fillcolor="[255,255,255]" rowspan="1" backgroundstyle="0" columnspan="1">
<Group labelreference="L63793" drawlabel="true">
<Input><Text-field style="Annotation Title" layout="Annotation Title">MSc Modelling and Simulation of  Mechatronics Systems</Text-field>
</Input>
<Input><Text-field style="Title" layout="Title">EXTREME SWING
STUDY AND DESIGN AN AMUSEMENT RIDE:
Winx Mechanism</Text-field>
</Input>
</Group>
<Group labelreference="L63791" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">JSFH</Equation></Text-field>
</Input>
</Group><Text-field style="Author" layout="Author">release 1.0 - date: 09/05/2020</Text-field>
<Group labelreference="L63794" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group>
<Group labelreference="L63788" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group></Table-Cell></Table-Row></Table>
<Group labelreference="L63778" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"></Text-field>
</Input>
</Group>
<Group labelreference="L63784" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Heading 1" layout="Heading 1"><Font size="24">RECURSIVE</Font></Text-field>
</Input>
</Group>
<Group labelreference="L63777" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"></Text-field>
</Input>
</Group>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" layout="Heading 1"><Font size="22">Initial Settings</Font></Text-field></Title>
<Group labelreference="L63768" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">restart:
with(plots):
cc := ColorTools:-GetPalette(&quot;spring&quot;):
plots[setcolors](&quot;spring&quot;):
interface(rtablesize=20):
with(MBSymba_r6):with(LinearAlgebra):
read(&quot;DAE-lib.maplet&quot;):</Text-field>
</Input>
</Group>
<Group labelreference="L63770" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">DATA</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63774" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">data := {L1 = 1.5*195-25, L2 = 1.5*266-25, L3 = 1.5*130, L4 = 1.5*59.3, L5 = 1.5*175, L6 = 1.5*207, L7 = 1.5*64.9, L8 = 1.5*64.9, L9 = 120, L10=40, phi1 = -Pi/5, phi2 = Pi/4};</Text-field>
</Input>
</Group>
</Section>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" layout="Heading 1"><Font size="22">Kinematics</Font></Text-field></Title>
<Group labelreference="L63796" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Global referrence frame</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63799" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RF0  := ground;
P0 := origin(RF0):<Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYoLUkjbWlHRiQ2I1EhRictSSdtc3BhY2VHRiQ2Ji8lJ2hlaWdodEdRJjAuMGV4RicvJSZ3aWR0aEdRJjAuMGVtRicvJSZkZXB0aEdGNC8lKmxpbmVicmVha0dRKG5ld2xpbmVGJy1GMDYmRjJGNUY4L0Y7USVhdXRvRidGKy8lK2V4ZWN1dGFibGVHUSZmYWxzZUYnLyUsbWF0aHZhcmlhbnRHUSdub3JtYWxGJw==">LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYoLUkjbWlHRiQ2I1EhRictSSdtc3BhY2VHRiQ2Ji8lJ2hlaWdodEdRJjAuMGV4RicvJSZ3aWR0aEdRJjAuMGVtRicvJSZkZXB0aEdGNC8lKmxpbmVicmVha0dRKG5ld2xpbmVGJy1GMDYmRjJGNUY4L0Y7USVhdXRvRidGKy8lK2V4ZWN1dGFibGVHUSZmYWxzZUYnLyUsbWF0aHZhcmlhbnRHUSdub3JtYWxGJw==</Equation></Text-field>
</Input>
</Group>
<Group labelreference="L63800" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Body 1 reference frame</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63802" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RF1_r := RF0.rotate('Z',theta1(t));
P1_r := origin(RF1_r):
<Font style="Text">Parameters:
</Font>q1_r := [theta1(t)]:</Text-field>
</Input>
</Group>
<Group labelreference="L63807" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Body 2</Font> </Text-field><Text-field style="Text" layout="Normal">Reference frame  # theta2 positivo verso il basso</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63808" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RF2_r:=RF1_r.translate(0,0,L1).rotate('Y',-theta2(t));
P2_r:=origin(RF2_r):</Text-field>
</Input>
</Group>
<Group labelreference="L63810" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Auxiliary reference frames p2 and p3</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63811" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RFp_2r := RF2_r.translate(L3,0,0);
Pp_2r := origin(RFp_2r):</Text-field>
</Input>
</Group>
<Group labelreference="L63813" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font style="Text">Parameters:
</Font>q2_r := [theta2(t)]:</Text-field>
</Input>
</Group>
<Group labelreference="L63803" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Body 3 (rotation around y in negative sense)</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63797" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#theta3 positivo verso il basso</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63809" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RFp_3r:=RFp_2r.translate(s(t), 0, 0);
Pp_3r:=origin(RFp_3r):</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63795" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RF3_r := RFp_3r.translate(L4,0,0).rotate('Y',theta3(t));
P3_r := origin(RF3_r):</Text-field>
</Input>
</Group>
<Group labelreference="L63801" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font style="Text">Parameters:
</Font>q3_r := [theta3(t)]:</Text-field>
</Input>
</Group>
<Group labelreference="L63805" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Body 4</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63765" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RF4_r := RF1_r.translate(0,0,L2).rotate('Y',-theta4(t));
P4_r := origin(RF4_r):</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63767" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RFp_4r :=RF4_r.translate(L5,0,0);
Pp_4r := origin(RFp_4r):</Text-field>
</Input>
</Group>
<Group labelreference="L63766" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Body 5</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63771" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RFp_5r := RFp_4r.translate(L6 * cos(phi1),0,L6 * sin(phi1));
Pp_5r := origin(RFp_5r):</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63769" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RF5_r := RFp_5r.rotate('Z',theta5(t));
P5_r := origin(RF5_r):</Text-field>
</Input>
</Group>
<Group labelreference="L63789" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font style="Text">Parameters:
</Font>q5_r := [theta5(t)]:</Text-field>
</Input>
</Group>
<Group labelreference="L63783" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Body 6</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63786" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RFp_6r := RF5_r.translate(L7+cos(phi2)*L8,sin(phi2)*L8,0).rotate('Z',phi2);
Pp_6r := origin(RFp_6r):</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63785" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RF6_r := RFp_6r.rotate('Y',theta6(t));
P6_r := origin(RF6_r):</Text-field>
</Input>
</Group>
<Group labelreference="L63787" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">q6_r := [theta6(t)]:</Text-field>
</Input>
</Group>
<Group labelreference="L63806" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Seat</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63790" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">RFSeat := RF6_r.translate(L10,0,-L9);
SSeat  := origin(RFSeat):</Text-field>
</Input>
</Group>
</Section>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" layout="Heading 1"><Font size="22">Constraints</Font></Text-field></Title>
<Group labelreference="L63775" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Get points to check prismatic joint</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63760" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">P3_r_proj := project(P3_r, RF1_r):</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63761" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Pp_4r_proj := project(Pp_4r, RF1_r):</Text-field>
</Input>
</Group>
<Group labelreference="L63776" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Get all the constraints given by prismatic joint</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63763" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">TotalPhi := comp_XYZ(join_points(P3_r_proj,Pp_4r_proj)): &lt;%&gt;;</Text-field>
</Input>
</Group>
<Group labelreference="L63772" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Remove redundant constraint</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63762" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Phi := [TotalPhi[1],TotalPhi[3]]: &lt;%&gt;;</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63764" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">qd_vars := {theta2(t), theta4(t)};
qi_vars := {theta1(t),s(t),theta5(t),theta6(t)};
q_vars := {theta1(t),s(t),theta2(t), theta4(t),theta5(t), theta6(t)};</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63812" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">kin := solve(subs(data,Phi), qd_vars);</Text-field>
</Input>
</Group>
<Group labelreference="L63779" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font size="18" bold="true">Constraints' Plots</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63781" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" spaceabove="0" linebreak="space" rightmargin="0" linespacing="0.0" initial="0" firstindent="0" leftmargin="0" bulletsuffix="" alignment="left" bullet="none" spacebelow="0" pagebreak-before="false">display(
plot(subs( kin, data, s(t) = st, theta2(t)*180/Pi), st = 0..100, color = cc[1], legend = theta2),
plot(subs( kin, data, s(t) = st, theta4(t)*180/Pi), st = 0..100, color = cc[2], legend = theta4),
<Font encoding="UTF-8">labels = [s, \302\260],</Font>
<Font encoding="UTF-8">title = &quot; Position analysis: position dependent coordinates\134n&quot;)</Font>;</Text-field>
</Input>
</Group>
<Group labelreference="L63773" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">UTILS Functions</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63798" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">q_vars_to_symbol := {seq(q_vars[i] = op(0, q_vars[i]), i = 1 .. nops(q_vars))};</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63804" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">q_vars_to_function := {seq(op(0,lhs(q_vars_to_symbol[i])) =  lhs(q_vars_to_symbol[i]), i = 1 .. nops(q_vars_to_symbol))};</Text-field>
</Input>
</Group>
</Section>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" layout="Heading 1"><Font size="22">Plot</Font></Text-field></Title><Presentation-Block>
<Group view="code" labelreference="L64037" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">draw_mech:=proc(kin_param::{set(`=`)}, data::{set(`=`)}, dof::{set(`=`)},$)<Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYqLUkjbWlHRiQ2I1EhRictSSdtc3BhY2VHRiQ2Ji8lJ2hlaWdodEdRJjAuMGV4RicvJSZ3aWR0aEdRJjAuMGVtRicvJSZkZXB0aEdGNC8lKmxpbmVicmVha0dRKG5ld2xpbmVGJy1JI21vR0YkNi1RIn5GJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRicvJSZmZW5jZUdRJmZhbHNlRicvJSpzZXBhcmF0b3JHRkYvJSlzdHJldGNoeUdGRi8lKnN5bW1ldHJpY0dGRi8lKGxhcmdlb3BHRkYvJS5tb3ZhYmxlbGltaXRzR0ZGLyUnYWNjZW50R0ZGLyUnbHNwYWNlR0Y3LyUncnNwYWNlR0Y3Ri8tRjA2JkYyRjVGOC9GO1ElYXV0b0YnRisvJStleGVjdXRhYmxlR0ZGRkE=">LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYqLUkjbWlHRiQ2I1EhRictSSdtc3BhY2VHRiQ2Ji8lJ2hlaWdodEdRJjAuMGV4RicvJSZ3aWR0aEdRJjAuMGVtRicvJSZkZXB0aEdGNC8lKmxpbmVicmVha0dRKG5ld2xpbmVGJy1JI21vR0YkNi1RIn5GJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRicvJSZmZW5jZUdRJmZhbHNlRicvJSpzZXBhcmF0b3JHRkYvJSlzdHJldGNoeUdGRi8lKnN5bW1ldHJpY0dGRi8lKGxhcmdlb3BHRkYvJS5tb3ZhYmxlbGltaXRzR0ZGLyUnYWNjZW50R0ZGLyUnbHNwYWNlR0Y3LyUncnNwYWNlR0Y3Ri8tRjA2JkYyRjVGOC9GO1ElYXV0b0YnRisvJStleGVjdXRhYmxlR0ZGRkE=</Equation>local p0,p1, p2, p3, p4, p5, p5_a,p6,pp2,pp3,r,lt,p6_a,p6_b,p_seat, p6x, p6y, p6z:
r:=10:lt:=10:
p0:=subs(kin_param,data,dof,[comp_XYZ(P0,ground)]):
p1:=subs(kin_param,data,dof,[comp_XYZ(P1_r,ground)]):
p2:=subs(kin_param,data,dof,[comp_XYZ(P2_r,ground)]):
p3:=subs(kin_param,data,dof,[comp_XYZ(P3_r,ground)]):
p4:=subs(kin_param,data,dof,[comp_XYZ(P4_r,ground)]):
p5:=subs(kin_param,data,dof,[comp_XYZ(P5_r,ground)]):
p5_a:=subs(kin_param,data,dof,[comp_XYZ(P5_r+make_VECTOR(RF5_r, L7,0,0),ground)]):
p6:=subs(kin_param,data,dof,[comp_XYZ(P6_r,ground)]):
p6_a:=subs(kin_param,data,dof,[comp_XYZ(P6_r+make_VECTOR(RF6_r, 0,0,-L9),ground)]):
p6_b:=subs(kin_param,data,dof,[comp_XYZ(P6_r+make_VECTOR(RF6_r, 0,0,-L9)+make_VECTOR(RF6_r, L10,0,0),ground)]):
#p_seat:=subs(kin_param,data,dof,[comp_XYZ(SSeat,ground)]):
pp2:=subs(kin_param,data,dof,[comp_XYZ(Pp_2r,ground)]):
pp3:=subs(kin_param,data,dof,[comp_XYZ(Pp_3r,ground)]):

p6x:=subs(kin_param,data,dof,[comp_XYZ(P6_r+make_VECTOR(RF6_r, 10,0,0),ground)]):
p6y:=subs(kin_param,data,dof,[comp_XYZ(P6_r+make_VECTOR(RF6_r, 0,10,0),ground)]):
p6z:=subs(kin_param,data,dof,[comp_XYZ(P6_r+make_VECTOR(RF6_r, 0,0,10),ground)]):

display(plottools:-sphere(p1,r,color=cc[1]),
plottools:-sphere(p2,r,color=cc[1]),
plottools:-sphere(p3,r,color=cc[1]),
plottools:-sphere(p4,r,color=cc[1]),
plottools:-sphere(p5,r,color=cc[1]),
plottools:-sphere(p5_a,r,color=cc[1]),
plottools:-sphere(p6,r,color=cc[1]),
plottools:-sphere(p6_a,r,color=cc[1]),
plottools:-sphere(p6_b,r,color=cc[1]),
plottools:-sphere(pp2,r,color=cc[1]),
plottools:-sphere(pp3,r,color=cc[1]),
#plottools:-sphere(p_seat,20,color=cc[1]),
plottools:-line(p1,p2,color=&quot;Blue&quot;, thickness=lt),
plottools:-line(p2,p4,color=&quot;Blue&quot;, thickness=lt),
plottools:-line(p2,pp2,color=&quot;Green&quot;, thickness=lt),
plottools:-line(p3,pp3,color=&quot;Blue&quot;, thickness=lt),
plottools:-line(p4,p3,color=&quot;Red&quot;, thickness=lt),
plottools:-line(p3,p5,color=&quot;Red&quot;, thickness=lt),
plottools:-line(p5,p5_a,color=&quot;Orange&quot;, thickness=lt),
plottools:-line(p5_a,p6,color=&quot;Yellow&quot;, thickness=lt),
plottools:-line(p6,p6_a,color=&quot;Blue&quot;, thickness=lt),
plottools:-line(p6_a,p6_b,color=&quot;Blue&quot;, thickness=lt),
plots:-arrow(p0,[10,0,0],color=&quot;Red&quot;, shape=arrow),
plots:-arrow(p0,[0,10,0],color=&quot;Green&quot;, shape=arrow),
plots:-arrow(p0,[0,0,10],color=&quot;Black&quot;, shape=arrow),

#plottools:-line(p6,p6x,color=&quot;Red&quot;, thickness=lt),
#plottools:-line(p6,p6y,color=&quot;Green&quot;, thickness=lt),
#plottools:-line(p6,p6z,color=&quot;Black&quot;, thickness=lt),
scaling=constrained,
axes=boxed
):
end:</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L65835" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Plot mechanism for animating</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L65834" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">draw_mech_for_animate:=proc(all_sols::list, index, data::{set(`=`)}, dofs::list,$)
local sol_kine, dof:
sol_kine:=all_sols[trunc(index)]:
dof:=dofs[trunc(index)]:
draw_mech(sol_kine,data,dof):
end:</Text-field>
</Input>
</Group></Presentation-Block>
</Section>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" size="24" layout="Heading 1"><Font size="22">Initial Position Problem - </Font><Font size="18">Analytic method</Font></Text-field></Title>
<Group labelreference="L64698" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Find <Font bold="true">Singular Configurations</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L64679" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">all_kine_sol := [allvalues(subs(s(t) = st, kin))]:
nops(all_kine_sol);</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L64682" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">singular(rhs(all_kine_sol[1][1]));</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L64684" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">singular(rhs(all_kine_sol[1][2]));</Text-field>
</Input>
</Group>
<Group labelreference="L64700" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Initial Configuration</Font></Text-field>
</Input>
</Group><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L64676" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">dof := {s(t) = 0, theta1(t) = 0, theta5(t) = 0, theta6(t) = 0}:
evalf(simplify(subs(dof, data, kin), explicit)):
%% union %;
evalf(subs(data,%,&lt;comp_XYZ(project(origin(RFSeat), RF0))&gt;));</Text-field>
</Input>
</Group></Presentation-Block>
<Group hide-input="false" labelreference="L64678" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">draw_mech(kin, data, dof);</Text-field>
</Input>
</Group>
</Section>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" layout="Heading 1"><Font size="22">Velocity</Font></Text-field></Title><Presentation-Block>
<Group view="code" labelreference="L64694" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font size="16" bold="true">Jacobians:</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64699" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">JPhiD := jacobianF(Phi,qd_vars): Rank(JPhiD)=2;
JPhiI := jacobianF(Phi,qi_vars): Rank(JPhiI)=1;

Tau := (simplify(-LinearAlgebra:-MatrixInverse(JPhiD).JPhiI, trig)):
Dimension(Tau);</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group labelreference="L64693" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Velocities of dependent coordinates</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L64695" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">qd_vars_dot := Tau.&lt;op(diff(qi_vars, t))&gt;</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64702" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true" foreground="[128,0,0]">Substitution expression</Font> for velocities</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64701" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">subs_qd_vars_vel := [seq( diff(qd_vars[i],t) = qd_vars_dot[i],i=1..nops(qd_vars))];
nops(%);</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64686" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" bold="false" layout="Normal"><Font bold="true">display( 
plot(subs(subs_qd_vars_vel, kin, data, <Font opaque="true" background="[255,255,0]" foreground="[0,0,0]">diff(s(t),t) = 1</Font>, s(t) = st, qd_vars_dot[1]*180/Pi), st = 0..100,color=cc[1],legend=typeset(diff(qd_vars[1],t))),
plot(subs(subs_qd_vars_vel, kin, data, <Font opaque="true" background="[255,255,0]">diff(s(t),t) = 1</Font>, s(t) = st, qd_vars_dot[2]*180/Pi), st = 0..100,color=cc[2],legend=typeset(diff(qd_vars[2],t))),
         labels = [typeset(s,&quot;[m]&quot;),vel],
         title = &quot; Velocity with driven body <Font opaque="true" background="[255,255,0]">moving at constant velocity rate</Font>&quot;);</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64690" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Heading 3" layout="Heading 3">Singular configurations</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64689" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">eq_det := simplify(LinearAlgebra:-Determinant(JPhiD));</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64691" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">We compute analytical singular configurations</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64697" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">SCs := solve( subs(data,[op(Phi) , eq_det]) , qd_vars union qi_vars, explicit=true): nops(&lt;SCs&gt;);</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64681" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font opaque="true" background="[255,255,0]">The SCs evaluated with the parameters of the system
<Font bold="true">SCs exists only on first option, with s(t)=85</Font></Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64680" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">&lt;SCs&gt;[1];</Text-field>
</Input>
</Group></Presentation-Block>
</Section>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" layout="Heading 1"><Font size="22">Acceleration</Font></Text-field></Title><Presentation-Block>
<Group labelreference="L64675" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">We can now compute the acceleration just by differentiating the velocities.
qD' = Tau(qD,qI).qI'
<Font underline="true">Remember that accelerations of dependents are: qD'' = Tau.qI''+diff(Tau,t).qD';</Font></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L64685" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#qD_dot;</Text-field>
</Input>
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">qd_vars_acc := simplify( map(diff,qd_vars_dot,t),size): 
AA,res := LinearAlgebra:-GenerateMatrix(convert(qd_vars_acc,list),diff(qi_vars,t,t)):
res:</Text-field>
</Input>
<Input><Text-field style="Text" layout="Normal">Proof:</Text-field>
</Input>
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">simplify(AA-Tau);</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group hide-input="false" labelreference="L64677" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group labelreference="L64692" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">In acceleration analysis, positions (i.e. coordinate values) and velocities of the coordinates be known</Text-field>
</Input>
</Group>
<Group labelreference="L64674" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">here the substitution can be done analytically since the model is not complex.</Text-field><Text-field style="Text" layout="Normal">However, itr would be better to compute velocities and accelerations in sequence given the position, velocity and acceleration of independent:</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L64687" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">qd_vars_acc_full := simplify(subs( subs_qd_vars_vel,qd_vars_acc),size):

<Font style="Text">Can be rewritten as: AA1.qI''+AA2.qI'^2:</Font>

AA1 ,  res := LinearAlgebra:-GenerateMatrix(convert(qd_vars_acc_full,list),diff(qi_vars,t,t)): res:
AA2 ,  res := LinearAlgebra:-<Font opaque="true">GenerateMatrix(subs(diff(s(t),t)^2=qI2,convert(-res,l</Font>ist)),[qI2]): res;

simplify(AA1-subs(subs_qd_vars_vel,AA));#PROOF
qD_acc: &lt;%&gt;:
qD_acc_full:&lt;%&gt;:</Text-field>
</Input>
</Group>
<Group labelreference="L64683" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Reconstruct the solution</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L64673" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">ACC := AA1.&lt;diff(s(t),t,t),0,0,0&gt;+AA2.&lt;diff(s(t),t)*diff(s(t),t)&gt;:</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64688" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">subs_qd_vars_acc := {seq( diff(qd_vars[i],t,t) = ACC[i],i=1..nops(qd_vars))};</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64696" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">display( 
plot(subs(subs_qd_vars_acc, kin,data, s(t) = st,  s__dot__dot<Font opaque="true" background="[255,255,0]"> = 0</Font>, s__dot2 = 1, ACC[1]*180/Pi),st = 0..85,color=cc[1],legend=typeset(diff(qd_vars[1],t,t))),
plot(subs(subs_qd_vars_acc, kin,data, s(t) = st, s__dot__dot<Font opaque="true" background="[255,255,0]"> = 0</Font>, s__dot2 = 1, ACC[2]*180/Pi),st = 0..85,color=cc[2],legend=typeset(diff(qd_vars[2],t,t))),
         labels = [typeset(s,&quot;[m]&quot;),acc],
         title = &quot; Accelerations with driven body moving at constant velocity rate&quot;);</Text-field>
</Input>
</Group></Presentation-Block>
</Section>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" layout="Heading 1"><Font size="24">Dynamics</Font></Text-field></Title><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L63865" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">masses := {m1 = 3000, m2 = 500, m3 = 500, m4 = 4000, m5 = 750, m6 = 150}:
inertias := {IZ1 = ((L2/2)^2)*m1 , IX2 = ((L3/2)^2)*m2 , IX3 = ((L4/2)^2)*m3 , IX4 = ((L5)^2)*m4 , IX5 = ((L7)^2)*m5 , IZ6 =((L9)^2)*m6}: subs(data,masses,inertias);
<Font foreground="[255,204,153]">#TorFor := {c1 = 100000000*sin(t), prism = 300*cos(t), c2 = 3*sin(t), c3 = 3*sin(t), c4 = 3*sin(t), c5 = 3*sin(t), c6 = 0}: # Not used anymore</Font></Text-field>
</Input>
<Input><Text-field prompt="&gt; " style="Maple Input" spaceabove="0" linebreak="space" rightmargin="0" linespacing="0.0" initial="0" firstindent="0" leftmargin="0" bulletsuffix="" alignment="left" bullet="none" spacebelow="0" pagebreak-before="false"></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L63895" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Centers of Mass</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L63897" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">G1 := make_POINT(RF1_r, 0,0, L2/2): 
G2 := make_POINT(RF2_r, L3/2,0,0):  
G3 := make_POINT(RFp_3r, L4/2,0,0):
G4 := make_POINT(RFp_4r, L5,0,0):
G5 := make_POINT(RF5_r,L7,0,0):
GSeat := make_POINT(RF6_r,0,0,-L9/2):</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L63894" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Definition of <Font bold="true">bodies</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63898" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">B1 := make_BODY(G1, m1, 0,0,IZ1):
B2 := make_BODY(G2, m2, IX2,0,0):
B3 := make_BODY(G3, m3, IX3,0,0):
B4 := make_BODY(G4, m4, IX4,0,0):
B5 := make_BODY(G5, m5, IX5,0,0):
BSeat := make_BODY(GSeat, m6, 0,0,IZ6): show(%):</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63899" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Joints</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63902" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">rev_1 := make_TORQUE(RF1_r,0,0,c1(t),B1):
pris := make_FORCE(RFp_2r,prism(t),0,0,Pp_2r, B3, B2):
#rev_2 := make_TORQUE(RF2_r,0,c2(t),0,B2,B1):
#rev_3 := make_TORQUE(RF3_r,0,c3(t),0,B3,B4):
#rev_4 := make_TORQUE(RF4_r,0,c4(t),0,B4,B1):
rev_5 := make_TORQUE(RF5_r,0,0,c5(t),B5,B4):
rev_Seat := make_TORQUE(RF6_r,0,c6(t),0,BSeat,B5):</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63900" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" foreground="[192,192,192]" layout="Normal"><Font foreground="[192,192,192]">External forces, we will use the alternative</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63863" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[192,192,192]">#weight1 := make_FORCE(make_VECTOR(ground,0,-m1*g,0), G1, B1);
#weight2 := make_FORCE(make_VECTOR(ground,0,-m2*g,0), G2, B2);
#weight3 := make_FORCE(make_VECTOR(ground,0,-m3*g,0), G3, B3);
#weight4 := make_FORCE(make_VECTOR(ground,0,-m4*g,0), G4, B4);
#weight5 := make_FORCE(make_VECTOR(ground,0,-m5*g,0), G5, B5);
#weight6 := make_FORCE(make_VECTOR(ground,0,-m6*g,0), G6, B6);</Font>
</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63866" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">We define the gravity and MBSymba will take into account gravitational forces</Font></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L63896" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[128,0,0]">_gravity := make_VECTOR(ground,0,0,-9.81):</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63882" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">LAGRANGE EQUATIONS</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group hide-input="false" hide-output="false" labelreference="L63887" drawlabel="true">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[255,204,153]" layout="Normal"><Font foreground="[255,204,153]">#lvars := [seq(lambda||i(t),i=1..nops(q_vars))];
#constraints := make_CONSTRAINT(PSI, convert(lvars,list));</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63883" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">lvars := [seq(lambda||i(t),i=1..nops(qd_vars))];
constraints := make_CONSTRAINT(Phi, convert(lvars,list));</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63848" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Coords := convert(q_vars union lvars,list);</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63879" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">mbs := {B1, B2, B3, B4, B5, BSeat,rev_1,pris,rev_5, rev_Seat, constraints}; # rev_3, rev_2,rev_4,</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L63891" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Multibody system</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63889" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">dae_sys := combine(simplify(lagrange_equations(mbs,Coords,t))):</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63941" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">DAE sytem of equations</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L63943" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">dae_vars1 , dae_sys1 := first_order(dae_sys, Coords, t): nops(dae_sys1);
dae_vars1;</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L63901" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63905" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" foreground="[255,204,153]" layout="Normal"><Font foreground="[255,204,153]">Test of profiles defined below</Font></Text-field><Text-field prompt="&gt; " style="Maple Input" foreground="[255,204,153]" layout="Normal"><Font foreground="[255,204,153]">#trtrd := subs({lambda1(t) = lambda1, lambda2(t)=lambda2, c1(t)=c1, prism(t)=prism, c5(t)=c5, c6(t)=c6},data, masses, inertias,dae_sys[1]):
#evalf(subs(all_acc[1], all_vel[1], all_pos[1],trtrd));</Font></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L63903" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">JSFH</Equation></Text-field>
</Input>
</Group></Presentation-Block>
<Group labelreference="L63922" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Heading 3" layout="Heading 3">Inverse dynamics</Text-field>
</Input>
</Group>
<Group labelreference="L63909" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Known dynamics from rehonomous system: with differentiation we ca get velocities and accelerations and then solve the full linear system to get ode+algebraic solutions</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63912" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Phi_dot  := diff(Phi,t):
Phi_dot2 := diff(Phi,t,t): &lt;%&gt;;
</Text-field>
</Input>
</Group>
<Group labelreference="L63923" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Equations of inverse dynamics: only acceleration of imposed dynamics are added.
Velocities and position of imposed dynamics will be substituted later (considered known)</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63884" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">nq := nops(q_vars):
inv_dyn_eqns := dae_sys[1..nq] union Phi_dot2: &lt;%&gt;:
nops(%%)</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63921" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">a_vars := [c1(t), c5(t), c6(t), prism(t)]:
l_vars := [lambda1(t), lambda2(t)]:
vars_to_symbol := {lambda1(t)=lambda1, lambda2(t)=lambda2, c1(t)=c1, prism(t)=prism, c5(t)=c5, c6(t)=c6};
qi_vars := { s(t), theta1(t), theta5(t), theta6(t)}:
inv_dyn_vars := diff(qi_vars,t,t) union a_vars:</Text-field>
</Input>
</Group><Presentation-Block>
<Group view="code" labelreference="L64747" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[255,153,204]" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYmLUkjbWlHRiQ2I1EhRicvJStmb3JlZ3JvdW5kR1EuWzI1NSwxNTMsMjA0XUYnLyUrZXhlY3V0YWJsZUdRJmZhbHNlRicvJSxtYXRodmFyaWFudEdRJ25vcm1hbEYn">JSFH</Equation></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64745" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[255,153,204]" layout="Normal"><Font foreground="[255,153,204]">pos_num := {s(t) = 42 - 42*cos(2*time/180*Pi), theta1(t) = Pi - Pi*cos(2*time/180*Pi), theta5(t) = Pi - Pi*cos(2*time/180*Pi), theta6(t) = Pi - Pi*cos(2*time/180*Pi)}</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64739" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[255,153,204]" layout="Normal"></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64749" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[255,153,204]" layout="Normal"><Font foreground="[255,153,204]">motors_points_num := Array(1 .. 180, []):</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64750" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[255,153,204]" layout="Normal"><Font foreground="[255,153,204]">for i from 1 by 1 to 180 do
  if (irem(i,60) = 0) then
     print(i):
     print(motors_points_num[i]):
  end if:
  dae_sys_sim := subs( subs_qd_vars_acc, subs_qd_vars_vel, kin, inertias, masses, data, evalf(subs(time = i-1, pos_num)), vars_to_symbol, inv_dyn_eqns):
  motors_points_num[i] := op(solve(dae_sys_sim, subs(vars_to_symbol, a_vars union l_vars))):
end do:</Font></Text-field>
</Input>
</Group></Presentation-Block>
<Group hide-input="false" labelreference="L64732" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[255,153,204]" layout="Normal"></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63908" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">AA,bb := LinearAlgebra:-GenerateMatrix(inv_dyn_eqns,inv_dyn_vars): Dimension(%[1]);
evalf(<Font foreground="[128,0,0]">subs(kin,dof,inertias,masses,data,AA));</Font></Text-field>
</Input>
</Group>
<Group labelreference="L67377" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Define steps</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L67379" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">steps := 1800;</Text-field>
</Input>
</Group>
<Group labelreference="L63917" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Evaluations of Position, Velocity, Acceleration</Text-field>
</Input>
</Group>
<Group labelreference="L64237" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">plot( 2*Pi*sin(t/steps*2*Pi), t = 0 .. steps);
plot(42-42*cos(t/steps*2*Pi), t = 0 .. steps);</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63913" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Choose Motion Profile</Text-field><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[128,0,0]">pos:={s(t)=42-42*</Font>cos(t/steps*2*Pi)<Font foreground="[128,0,0]">, theta1(t)=</Font>2*Pi*sin(t/steps*2*Pi)<Font foreground="[128,0,0]">, theta5(t)=</Font>2*Pi*sin(t/steps*2*Pi)<Font foreground="[128,0,0]">, theta6(t)=</Font>2*Pi*sin(t/steps*2*Pi)<Font foreground="[128,0,0]">}:
</Font>pos_d := simplify(subs(data, pos, kin)):</Text-field>
</Input>
</Group>
<Group labelreference="L64966" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">JSFH</Equation></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L67374" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Define Arrays for solutions</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63910" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">pos := pos union pos_d;
vel := diff(pos,t):
acc := diff(vel, t):
all_pos := Array(1 .. steps, []):
all_vel := Array(1 .. steps, []):
all_acc := Array(1 .. steps, []):</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L67372" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63919" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Obtain all the points</Text-field><Text-field prompt="&gt; " style="Maple Input" layout="Normal">for i from 1 by 1 to steps do
  if (irem(i,steps/18) = 0) then
     print(i)
  end if:
  nowPos:={};
  nowVel:={};
  nowAcc:={};
  for j from 1 to 6 do
    nowPos := nowPos union {lhs(pos[j])= evalf(subs(t=(i-1), data, rhs(pos[j])))};
    nowVel := nowVel union {lhs(vel[j])= evalf(subs(nowPos, t=(i-1), data, rhs(vel[j])))};
    nowAcc := nowAcc union {lhs(acc[j])= evalf(subs(nowVel, nowPos, t=(i-1), data, rhs(acc[j])))};
    <Font foreground="[255,204,153]">#print(nowAcc);</Font>
  end do:
  all_pos[i]:= evalf(nowPos);
  all_vel[i]:= evalf(nowVel);
  all_acc[i]:= evalf(nowAcc);
end do:</Text-field>
</Input>
</Group>
<Group labelreference="L64738" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group>
<Group labelreference="L63881" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">motors_points := seq(fsolve(evalf(subs(vars_to_symbol,all_acc[i], all_vel[i],all_pos[i], inertias, data, masses, inv_dyn_eqns))[1..nops(q_vars)]),i = 1 .. steps):</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63920" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group>
<Group labelreference="L63931" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Display of motor profiles</Text-field><Text-field prompt="&gt; " style="Maple Input" layout="Normal">display( 
plot(   [  seq(  [  i  ,  rhs(motors_points[i][1])  ]  ,  i=1..nops([motors_points])  )  ] ,color=cc[1],legend=typeset(c1) ),
plot(   [  seq(  [  i  ,  rhs(motors_points[i][2]) ]  ,  i=1..nops([motors_points])  )  ] ,color=cc[2],legend=typeset(c5) ),
plot(   [  seq(  [  i  ,  rhs(motors_points[i][3]) ]  ,  i=1..nops([motors_points])  )  ] ,color=cc[3],legend=typeset(c6) ),
plot(   [  seq(  [  i  ,  rhs(motors_points[i][4]) ]  ,  i=1..nops([motors_points])  )  ] ,color=cc[4],legend=typeset(lambda1) ),
plot(   [  seq(  [  i  ,  rhs(motors_points[i][5]) ]  ,  i=1..nops([motors_points])  )  ] ,color=cc[5],legend=typeset(lambda2) ),
plot(   [  seq(  [  i  ,  rhs(motors_points[i][6]) ]  ,  i=1..nops([motors_points])  )  ] ,color=cc[6],legend=typeset(prism) ),
         labels = [typeset(t,&quot;[s]&quot;),Motors],
         title = &quot;Motors profiles&quot;);</Text-field>
</Input>
</Group><Presentation-Block>
<Group view="code" labelreference="L65164" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYjLUkjbWlHRiQ2I1EhRic=</Equation></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L65389" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">To <Font bold="true">animate</Font> the motion profiles</Text-field><Text-field prompt="&gt; " style="Maple Input" foreground="[128,0,0]" layout="Normal"><Font foreground="[128,0,0]">pos_anim:={s(t)=42-42*</Font><Font foreground="[120,0,14]">cos(time/steps*2*Pi)</Font><Font foreground="[128,0,0]">, theta1(t)=</Font><Font foreground="[120,0,14]">2*Pi*sin(time/steps*2*Pi)</Font><Font foreground="[128,0,0]">, theta5(t)=</Font><Font foreground="[120,0,14]">2*Pi*sin(time/steps*2*Pi)</Font><Font foreground="[128,0,0]">, theta6(t)=</Font><Font foreground="[120,0,14]">2*Pi*sin(time/steps*2*Pi)</Font><Font foreground="[128,0,0]">}:</Font></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L65385" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[128,0,0]">animate(draw_mech, [kin, data, pos_anim], time=0..steps,frames=36); # Think twice before executing 180 frames of those profile (&gt;300MB file)</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63856" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Pagebreak></Pagebreak>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63876" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Section" opaque="false" subscript="false" underline="false" superscript="false" bold="false" foreground="[0,0,0]" italic="false" executable="false" selection-placeholder="false" size="12" readonly="false" background="[255,255,255]" placeholder="false" family="Times New Roman" font_style_name="Section" layout="Section" linespacing="0.0" initial="0" firstindent="0" leftmargin="0" layout_style_name="Section" pagebreak-before="false" spaceabove="0" linebreak="space" rightmargin="0" bulletsuffix="" alignment="left" bullet="none" spacebelow="0">Initial conditions for reaction forces</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63935" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[255,204,153]" layout="Normal"><Font foreground="[255,204,153]">#ics_I := t=1;
#ics_D := op(kin_solutions[2] union {3s__dot(1) = rhs(kin_solutions_vel[2][1]), theta1__dot(1) =  rhs(kin_solutions_vel[2][2]), theta2__dot(1) =  rhs(kin_solutions_vel[2][3]), theta4__dot(1) =  rhs(kin_solutions_vel[2][4]), theta5__dot(1) =  rhs(kin_solutions_vel[2][5]), theta6__dot(1) =  rhs(kin_solutions_vel[2][6])});
#ICS := op({ics_D}):</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63864" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63924" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[255,204,153]">#ics_I := s(0) = evalf(subs(t=0,s_profile_time)), theta1(0) = evalf(subs(t=0,theta1_profile_time)), theta5(0) = evalf(subs(t=0,theta5_profile_time)), theta6(0) = evalf(subs(t=0,theta6_profile_time)), s__dot(0) = 0, theta1__dot(0) = 0, theta5__dot(0) = 0, theta6__dot(0) = 0;

#ics_I := op(subs(t=1, all_pos[2]) union down_order(all_vel[2],q_vars,t));

#ics_D := op( simplify( subs( t=0, ics_I, evalf(subs(t=0,data,ics_I, sol_kine)), subs( diff(s(t),t) = s__dot(t), diff(theta1(t),t) = theta1__dot(t), diff(theta2(t),t) = theta2__dot(t), diff(theta4(t),t) = theta4__dot(t), data,  sol_kine_vel) ) union evalf(subs(t=0,data,ics_I, kin)) ) );

#ICS := op({ics_I} union {ics_D});</Font>

ICS := op(subs(t=0, all_pos[1]) union subs(t=0,down_order(all_vel[1],q_vars,t)));
#ICS := op(subs(t=1, all_pos[2]) union subs(t=1,down_order(all_vel[2],q_vars,t)));</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63850" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Initial conditions for reaction forces</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L63854" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">dae_sys[1..-nops(Phi)-1] union diff(Phi,t,t):

AA, BB := GenerateMatrix(%,diff(q_vars,t,t) union l_vars):
BB := down_order(BB,q_vars,t):</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L63875" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">LinearSolve(evalf(subs(t = 0, ICS, inertias, data, masses, AA)), evalf(subs(subs(c1=c1(t),c5=c5(t),c6=c6(t),prism = prism(t), motors_points[1]), t = 0, ICS, inertias, data, masses, BB)));
ics := subs( t = 0, {ICS, seq(lvars[i]=%[i+nops(q_vars)],i=1..nops(lvars))});nops(%):
</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63938" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Numerical solution</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63940" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Loop for numerical solutions</Text-field><Text-field prompt="&gt; " style="Maple Input" layout="Normal">motor_points_ics := subs(c1=c1(t),c5=c5(t), c6=c6(t),prism = prism(t),motors_points[1][1..3] union [motors_points[1][6]]):
ics union % ;
motor_points_ics := subs(c1=c1(t),c5=c5(t), c6=c6(t),prism = prism(t),motors_points[2][1..3] union [motors_points[2][6]]);
dyn_sys := {op(subs(inertias, data, motor_points_ics, masses, dae_sys1))} union ics:</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L66467" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYjLUkjbWlHRiQ2I1EhRic=</Equation></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63880" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">sol := dsolve(dyn_sys, numeric, implicit=true);#, maxfun=10^5):</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L65867" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63929" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Solutions := Array(1 .. steps + 1, []):
Solutions[1] := sol(1)[2..-1]:
#Solutions[2] := sol(0.1)[2..-1]:
index_i := 0:
for i from 1 to steps + 1 do # ADD 1 INSTEAD TO START FROM 0<Font foreground="[192,192,192]">
  </Font>if (irem(i,10) = 0) then
     print(i);
  end if:
  motor_points_ics := subs(c1=c1(t),c5=c5(t),c6=c6(t),prism = prism(t),motors_points[i+2][1..3] union [motors_points[i+2][6]]):

  dyn_sys := {op(subs(inertias, data, motor_points_ics, masses, dae_sys1))} union subs(t=0,Solutions[i]):

  sol := dsolve(dyn_sys, numeric, implicit=true, maxfun=0):
  
  Solutions[i+1]:=sol(1)[2..-1]:
  
  index_i := i;
end do:</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L66528" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">JSFH</Equation></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L66053" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">index_i;
Solutions[index_i];</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63944" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Dynamic Motion Profiles</Text-field><Text-field prompt="&gt; " style="Maple Input" layout="Normal">display( 
plot(   [  seq(  [  i  ,  rhs(Solutions[i][3])  ]  ,  i=1..index_i  )  ] ,color=cc[1],legend=typeset(s) ),
plot(   [  seq(  [  i  ,  rhs(Solutions[i][5])*180/Pi ]  ,  i=1..index_i  )  ] ,color=cc[2],legend=typeset(theta1) ),
plot(   [  seq(  [  i  ,  rhs(Solutions[i][7])*180/Pi ]  ,  i=1..index_i  )  ] ,color=cc[3],legend=typeset(theta2) ),
plot(   [  seq(  [  i  ,  rhs(Solutions[i][9])*180/Pi ]  ,  i=1..index_i  )  ] ,color=cc[4],legend=typeset(theta4) ),
plot(   [  seq(  [  i  ,  rhs(Solutions[i][11])*180/Pi ]  ,  i=1..index_i  )  ] ,color=cc[5],legend=typeset(theta5) ),
plot(   [  seq(  [  i  ,  rhs(Solutions[i][13])*180/Pi ]  ,  i=1..index_i  )  ] ,color=cc[6],legend=typeset(theta6) ),
         labels = [typeset(t,&quot;[s]&quot;),Positions],
         title = &quot;Positions profiles&quot;);</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L67022" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYjLUkjbWlHRiQ2I1EhRic=</Equation></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L63907" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Plot ideal motion profiles</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L63945" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">display( 
plot( rhs([pos[]][1])         ,  t=1..index_i   ,color=cc[1],legend=typeset(s)),
plot( rhs([pos[]][2])  *180/Pi,  t=1..index_i   ,color=cc[2],legend=typeset(theta1__d)),
plot( rhs([pos[]][3])  *180/Pi,  t=1..index_i   ,color=cc[3],legend=typeset(theta2__d)),
plot( rhs([pos[]][4])  *180/Pi,  t=1..index_i   ,color=cc[4],legend=typeset(theta4__d)),
plot( rhs([pos[]][5])  *180/Pi,  t=1..index_i   ,color=cc[5],legend=typeset(theta5__d)),
plot( rhs([pos[]][5])  *180/Pi,  t=1..index_i   ,color=cc[6],legend=typeset(theta6__d)) ,
         labels = [typeset(t,&quot;[s]&quot;), &quot;&quot;],
         title = &quot;Positions desired&quot;);
</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L63849" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Plot for ode solutions (Not reached)(Maybe using splines?)</Text-field><Text-field prompt="&gt; " style="Maple Input" foreground="[255,204,153]" layout="Normal"><Font foreground="[255,204,153]">#tf := 180:
#odeplot(sol, subs( inertias, subs(vars_to_symbol , motor_points_ics), data, masses,
             [[t,  theta1(t)*180/Pi,              color=cc[1]],
              [t,  s(t),                          color=cc[2]],
              [t,  theta2(t)*180/Pi-180,            color=cc[3]],
              #[t,  theta3(t)*180/Pi-180,            color=cc[4]],
              [t,  theta4(t)*180/Pi-180,            color=cc[5]],
              [t,  theta5(t)*180/Pi-180,            color=cc[6]],
              [t,  theta6(t)*180/Pi-180,            color=cc[7]]]),
        #t = 1..tf,legend=[theta1,s,theta2,theta4,theta5,theta6],
        t = 0..tf,legend=[theta1,s,theta2,theta4,theta5,theta6],
        axes=boxed, axis[2]=[gridlines=[linestyle=dot]],
        title=&quot;Positions&quot;, size=[800,400 ],numpoints=400);</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63915" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Animate</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63892" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[255,204,153]">#draw_mech({}, data, convert(sol(0),set));</Font>
draw_mech({}, data, convert(Solutions[1],set)); # Initial Position</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63911" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[255,204,153]">#ex := [seq(convert(sol(i),set),i=0..8)]:</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63869" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[255,204,153]">#animate(draw_mech_for_animate, [ex, time, data, ex], time = 1 .. 8);</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L63926" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[128,0,0]" layout="Normal"><Font foreground="[128,0,0]">Sol_Animate := [seq(convert(Solutions[i],set),i=1..index_i)]:</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63925" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[128,0,0]" layout="Normal"><Font foreground="[128,0,0]">animate(draw_mech_for_animate, [Sol_Animate, time, data, Sol_Animate], time = 1 .. index_i,frames=36);</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63932" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Pagebreak></Pagebreak>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63870" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Equation executable="true" style="2D Input" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">JSFH</Equation></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63886" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Matrix form</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L63877" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">AA,BB := GenerateMatrix(dae_sys1,diff(dae_vars1,t)):
Mass_maybe := AA[1..8,9..-1]:#Not sure it's the real mass matrix, to check
simplify((AA . (Vector(diff(dae_vars1, t)))) - BB - Vector(dae_sys1)); #Evaluated to check </Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L63927" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">POS := dae_vars1[1..6];
VEL := dae_vars1[9..-3];
ACC := [s__dot__dot(t), theta1__dot__dot(t), theta2__dot__dot(t), theta4__dot__dot(t), theta5__dot__dot(t), theta6__dot__dot(t), lambda1__dot__dot(t), lambda2__dot__dot(t)];
MUL := lvars;
Phi := Phi;</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63946" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Extract mass</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L63947" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Mass,RES := GenerateMatrix(dae_sys1,diff(VEL,t)):Mass:=Mass[1..-9]:</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L63939" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Extract  Phi_q^t</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L63936" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Phi_q_T,res := GenerateMatrix(dae_sys1,{lambda1(t),lambda2(t)}):DAE_3_Phi_q_t:
Phi_q:=simplify(Transpose(Phi_q_T[1..6])):</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L63934" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Phi_q_T, res := GenerateMatrix(convert(-RES, list), {lambda1(t), lambda2(t)}):
Phi_q := simplify(Transpose(Phi_q_T[1 .. 6])):</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63914" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Equation executable="true" style="2D Math" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYnLUkjbWlHRiQ2JVEoRXh0cmFjdEYnLyUnaXRhbGljR1EldHJ1ZUYnLyUsbWF0aHZhcmlhbnRHUSdpdGFsaWNGJy1JI21vR0YkNi1RIn5GJy9GM1Enbm9ybWFsRicvJSZmZW5jZUdRJmZhbHNlRicvJSpzZXBhcmF0b3JHRj0vJSlzdHJldGNoeUdGPS8lKnN5bW1ldHJpY0dGPS8lKGxhcmdlb3BHRj0vJS5tb3ZhYmxlbGltaXRzR0Y9LyUnYWNjZW50R0Y9LyUnbHNwYWNlR1EmMC4wZW1GJy8lJ3JzcGFjZUdGTC1GLDYlUSdmb3JjZXNGJ0YvRjIvJTBmb250X3N0eWxlX25hbWVHUSkyRH5JbnB1dEYnRjk=">LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYnLUkjbWlHRiQ2JVEoRXh0cmFjdEYnLyUnaXRhbGljR1EldHJ1ZUYnLyUsbWF0aHZhcmlhbnRHUSdpdGFsaWNGJy1JI21vR0YkNi1RIn5GJy9GM1Enbm9ybWFsRicvJSZmZW5jZUdRJmZhbHNlRicvJSpzZXBhcmF0b3JHRj0vJSlzdHJldGNoeUdGPS8lKnN5bW1ldHJpY0dGPS8lKGxhcmdlb3BHRj0vJS5tb3ZhYmxlbGltaXRzR0Y9LyUnYWNjZW50R0Y9LyUnbHNwYWNlR1EmMC4wZW1GJy8lJ3JzcGFjZUdGTC1GLDYlUSdmb3JjZXNGJ0YvRjIvJTBmb250X3N0eWxlX25hbWVHUSkyRH5JbnB1dEYnRjk=</Equation></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63930" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">res[-8 .. -1]:</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L63928" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">gen_forces := res[1 .. -9]:
nops(POS);
nops(VEL);
nops(Mass[1]);</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63933" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">A, B, Phi_Q, H, W := DAEindex3ToODE(Mass, Phi, convert(gen_forces, list), POS, VEL);</Text-field>
</Input>
</Group></Presentation-Block>
<Section collapsed="false" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 2" layout="Heading 2">Code Generation</Text-field></Title>
<Group hide-input="false" labelreference="L63852" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">VARS     := map2(op,0,[op(POS),op(VEL)]);
REMOVE_T := [seq( POS[i]=op(0,POS[i]),i=1..nops(POS)),
             seq( VEL[i]=op(0,VEL[i]),i=1..nops(VEL)),
             seq( MUL[i]=op(0,MUL[i]),i=1..nops(MUL)),
             seq( ACC[i]=op(0,ACC[i]),i=1..nops(ACC)),
             seq( a_vars[i]=op(0,a_vars[i]),i=1..nops(a_vars))
            ];</Text-field>
</Input>
</Group>
<Group labelreference="L63862" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB(subs(REMOVE_T, Mass), subs(REMOVE_T,POS), &quot;Mass&quot;);</Text-field>
</Input>
</Group>
<Group labelreference="L63857" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#F_TO_MATLAB( subs(REMOVE_T,Phi), VARS, &quot;Phi&quot;);</Text-field>
</Input>
</Group>
<Group labelreference="L63873" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB(subs(REMOVE_T, JACOBIAN(Phi, POS)), subs(REMOVE_T, POS), &quot;DPhiDp&quot;)</Text-field>
</Input>
</Group>
<Group labelreference="L63874" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB(JACOBIAN(subs(REMOVE_T, Phi), t), subs(REMOVE_T, POS), &quot;DPhiDt&quot;)</Text-field>
</Input>
</Group>
<Group labelreference="L63853" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#F_TO_MATLAB(subs(REMOVE_T, A), VARS, &quot;A&quot;)</Text-field>
</Input>
</Group>
<Group labelreference="L63871" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB(subs(REMOVE_T, JACOBIAN(A, POS)), VARS, &quot;DADp&quot;)</Text-field>
</Input>
</Group>
<Group labelreference="L63872" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB(subs(REMOVE_T, JACOBIAN(A, t)), VARS, &quot;DADt&quot;)</Text-field>
</Input>
</Group>
<Group labelreference="L63858" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#F_TO_MATLAB(subs(REMOVE_T, B), VARS, &quot;B&quot;)</Text-field>
</Input>
</Group>
<Group labelreference="L63859" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#F_TO_MATLAB(subs(REMOVE_T, convert(gen_forces, list)), VARS, &quot;gfun&quot;)</Text-field>
</Input>
</Group>
<Group labelreference="L63851" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB( JACOBIAN(subs(REMOVE_T,H),VARS), VARS, &quot;Hx&quot;);</Text-field>
</Input>
</Group>
<Group labelreference="L63893" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB( JACOBIAN(subs(REMOVE_T,H),VARS), VARS, &quot;Hx&quot;);</Text-field>
</Input>
</Group>
<Group labelreference="L63860" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB( JACOBIAN(subs(REMOVE_T,W),VARS), VARS, &quot;Wx&quot;);</Text-field>
</Input>
</Group>
<Group labelreference="L63861" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">#JF_TO_MATLAB(JACOBIAN(subs(REMOVE_T, H), t), VARS, &quot;DhDt&quot;)</Text-field>
</Input>
</Group>
<Group hide-input="false" labelreference="L63855" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">subs(data, masses, inertias);</Text-field>
</Input>
</Group>
</Section><Presentation-Block>
<Group view="code" labelreference="L63878" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Index Reduction</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L63890" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[153,51,102]" layout="Normal"><Font foreground="[153,51,102]">DAE1, ALG1 := DAEreduceBy1TheIndexBis( dae_sys1, diff(Coords,t) ):
simplify(&lt;DAE1&gt;):
simplify(&lt;ALG1&gt;):</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63906" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[153,51,102]" layout="Normal"><Font foreground="[153,51,102]">DAE2, ALG2 := DAEreduceBy1TheIndexBis( simplify(DAE1), diff(Coords,t) ):
simplify(&lt;DAE2&gt;):
simplify(&lt;ALG2&gt;):</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L63904" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[153,153,153]" layout="Normal"><Font foreground="[153,153,153]">#DAE3, ALG3 := DAEreduceBy1TheIndexBis( simplify(DAE2), diff(Coords,t) ): #UnFeasible, but we might be satisfied with an Index-1 DAE
#simplify(&lt;DAE3&gt;):
#simplify(&lt;ALG3&gt;):</Font></Text-field>
</Input>
</Group></Presentation-Block>
</Section>
<Section collapsed="true" isCollapsible="true" drawButton="true" MultipleChoiceAnswerIndex="-1" MultipleChoiceRandomizeChoices="false" TrueFalseAnswerIndex="-1" EssayAnswerRows="5" EssayAnswerColumns="60"><Title><Text-field style="Heading 1" layout="Heading 1"><Font size="20">Static Dynamics</Font></Text-field></Title><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L64075" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">masses := {m1= 3000,m2 = 500,m3 = 500,m4 = 4000,m5 = 750,m6 = 150}:
inertias := {IZ1 = ((L2/2)^2)*m1, IX2 =((L3/2)^2)*m2, IX3 = ((L4/2)^2)*m3, IX4 = ((L5)^2)*m4, IX5 = ((L7)^2)*m5, IZ6 =((L9)^2)*m6}:
TorFor := {c1 = 0, prism = 0, c2 = 0, c3 = 0, c4 = 0, c5 = 0, c6 = 0}:</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64084" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Centers of Mass</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64086" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">G1 := make_POINT(RF1_r, 0,0, L2/2): 
G2 := make_POINT(RF2_r, L3/2,0,0):  
G3 := make_POINT(RFp_3r, L4/2,0,0):
G4 := make_POINT(RFp_4r, L5,0,0):
G5 := make_POINT(RF5_r,L7,0,0):
GSeat := make_POINT(RF6_r,0,0,-L9/2):</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64083" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Definition of <Font bold="true">bodies</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64088" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">B1 := make_BODY(G1, m1, 0,0,IZ1):
B2 := make_BODY(G2, m2, IX2,0,0):
B3 := make_BODY(G3, m3, IX3,0,0):
B4 := make_BODY(G4, m4, IX4,0,0):
B5 := make_BODY(G5, m5, IX5,0,0):
BSeat := make_BODY(GSeat, m6, 0,0,IZ6): show(%):</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64089" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Joints</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64094" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">rev_1 := make_TORQUE(RF1_r,0,0,c1,B1):
pris := make_FORCE(RFp_2r,prism,0,0,Pp_2r, B3, B2):
#rev_2 := make_TORQUE(RF2_r,0,c2,0,B2,B1):
#rev_3 := make_TORQUE(RF3_r,0,c3,0,B3,B4):
#rev_4 := make_TORQUE(RF4_r,0,c4,0,B4,B1):
rev_5 := make_TORQUE(RF5_r,0,0,c5,B5,B4):
rev_Seat := make_TORQUE(RF6_r,0,c6,0,BSeat,B5):</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64077" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">We define the gravity and MBSymba will take into account gravitational forces</Font></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64085" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"><Font foreground="[128,0,0]">_gravity := make_VECTOR(ground,0,0,-9.81):</Font></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64071" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">LAGRANGE EQUATIONS</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L64073" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">lvars := [seq(lambda||i(t),i=1..nops(qd_vars))];
constraints := make_CONSTRAINT(Phi, convert(lvars,list));</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64064" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">Coords := convert(q_vars union lvars,list);</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64063" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">mbs := {B1, B2, B3, B4, B5, BSeat,rev_1,pris,rev_5, rev_Seat, constraints}; # rev_3, rev_2,rev_4,</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64081" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Multibody system</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64080" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">dae_sys := combine(simplify(lagrange_equations(mbs,Coords,t))): </Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64090" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">DAE sytem of equations</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L64097" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">dae_vars1 , dae_sys1 := first_order(dae_sys, Coords, t): nops(dae_sys1);
dae_vars1;</Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64078" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Pagebreak></Pagebreak>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64070" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Section" opaque="false" subscript="false" underline="false" superscript="false" bold="false" foreground="[0,0,0]" italic="false" executable="false" selection-placeholder="false" size="12" readonly="false" background="[255,255,255]" placeholder="false" family="Times New Roman" font_style_name="Section" layout="Section" linespacing="0.0" initial="0" firstindent="0" leftmargin="0" layout_style_name="Section" pagebreak-before="false" spaceabove="0" linebreak="space" rightmargin="0" bulletsuffix="" alignment="left" bullet="none" spacebelow="0">Initial conditions for reaction forces</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L64133" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">sol_kine := simplify(op(solve(Phi,convert(qd_vars,list)))):
sol_kine_vel := simplify(op(solve(diff(Phi,t),convert(diff(qd_vars,t),list)))):</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64062" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">ics_I := s(0) = 0, theta1(0) = Pi/2, theta5(0) = 0, theta6(0) = 0, s__dot(0) = 0, theta1__dot(0) = 0, theta5__dot(0) = 0, theta6__dot(0) = 0;
ics_D := op(simplify(subs( data, subs(t=0,ics_I, subs(diff(s(t),t)=s__dot(t),diff(theta1(t),t)=theta1__dot(t),diff(theta2(t),t)=theta2__dot(t),diff(theta4(t),t)=theta4__dot(t), sol_kine_vel)) union subs(t=0,ics_I, kin))));
ICS := op({ics_I} union {ics_D}):</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64065" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal"></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64087" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Initial conditions for reaction forces</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L64076" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">dae_sys[1..-nops(Phi)-1] union diff(Phi,t,t):
AA, BB := GenerateMatrix(%,diff(q_vars,t,t) union lvars):
BB := down_order(BB,q_vars,t):</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L64074" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">LinearSolve(evalf(subs(t = 0, ics_I ,ics_D, inertias, TorFor, data, masses,AA)), evalf(subs(t = 0, ics_I , ics_D, inertias, TorFor, data, masses,BB)));

ics := subs( t = 0, {ics_I, ics_D, seq(lvars[i]=%[i+nops(q_vars)],i=1..nops(lvars))});</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64095" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal">Numerical solution</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L64061" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">dyn_sys := {op(subs( inertias, TorFor, data, masses, dae_sys1))} union ics:
sol := dsolve(dyn_sys union ics, numeric,implicit=true, maxfun=10^5):</Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" hide-output="false" labelreference="L64092" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" layout="Normal">tf := 180:
odeplot(sol, subs( inertias, TorFor, data, masses,
             [[t,  theta1(t)*180/Pi,              color=cc[1]],
              [t,  s(t),                          color=cc[2]],
              [t,  theta2(t)*180/Pi,            color=cc[3]],
              #[t,  theta3(t)*180/Pi,            color=cc[4]],
              [t,  theta4(t)*180/Pi,            color=cc[5]],
              [t,  theta5(t)*180/Pi,            color=cc[6]],
              [t,  theta6(t)*180/Pi,            color=cc[7]]]),
        #t = 1..tf,legend=[theta1,s,theta2,theta4,theta5,theta6],
        t = 0..tf,legend=[theta1,s,theta2,theta4,theta5,theta6],
        axes=boxed, axis[2]=[gridlines=[linestyle=dot]],
        title=&quot;Bodies'angles (absolute)&quot;, size=[800,400 ],numpoints=400);</Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" hide-input="false" labelreference="L64066" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Font bold="true">Animate</Font></Text-field>
</Input>
</Group>
<Group view="code" labelreference="L64067" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[128,0,0]" layout="Normal"><Font foreground="[128,0,0]">draw_mech({}, data, convert(sol(0),set));</Font></Text-field>
</Input>
</Group>
<Group view="code" hide-input="false" labelreference="L64072" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[128,0,0]" layout="Normal"><Font foreground="[128,0,0]">ex := [seq(convert(sol(i),set),i=0..180)]:</Font></Text-field>
</Input>
</Group></Presentation-Block><Presentation-Block>
<Group view="code" labelreference="L64069" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field prompt="&gt; " style="Maple Input" foreground="[128,0,0]" layout="Normal"><Font foreground="[128,0,0]">animate(draw_mech_for_animate, [ex, time, data, ex], time = 1 .. 180,frames = 36);</Font></Text-field>
</Input>
</Group></Presentation-Block>
</Section><Presentation-Block>
<Group view="presentation" inline-output="false" labelreference="L64186" drawlabel="true" applyint="true" applyrational="true" applyexponent="false">
<Input><Text-field style="Text" layout="Normal"><Equation executable="true" style="2D Math" input-equation="" display="LUklbXJvd0c2Iy9JK21vZHVsZW5hbWVHNiJJLFR5cGVzZXR0aW5nR0koX3N5c2xpYkdGJzYlLUkjbWlHRiQ2I1EhRicvJStleGVjdXRhYmxlR1EmZmFsc2VGJy8lLG1hdGh2YXJpYW50R1Enbm9ybWFsRic=">JSFH</Equation></Text-field>
</Input>
</Group></Presentation-Block>
</Worksheet>